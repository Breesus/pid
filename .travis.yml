language: cpp
compiler:
    - gcc
    - clang
addons:
    apt:
        packages:
            - python3.5
            - python3.5-dev
            - python-pip

before_install:
    - sudo pip install pyaml jinja2
    - pushd ..
    - wget "https://github.com/cpputest/cpputest.github.io/blob/master/releases/cpputest-3.6.tar.gz?raw=true" -O cpputest.tar.gz
    - tar -xzf cpputest.tar.gz
    - cd cpputest-3.6/
    - ./configure
    - make
    - sudo make install
    - popd

    - pip install cvra-packager==1.0.0

before_script:
    - packager
    - mkdir build/
    - cd build/
    - cmake ..

script:
    - make
    - ./tests
